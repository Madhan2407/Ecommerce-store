{% extends 'base.html' %}
{% load static %}
{% block metadescription %}
    {% if category %}
        {{ category.description|truncatewords:155 }}
    {% else %}
        Welcome to Mintmade Fashion where you can buy different items....
    {% endif %}
{% endblock %}

{% block title %}
    {% if category %}
        {{ category.name }} - Mintmade Fashion
    {% else %}
        See our New Collections - Mintmade Fashion
    {% endif %}
{% endblock %}

{% block content %}
    {% if category %}
        <!-- Category Banner -->
        <div class="category-banner">
            <div class="container">
                <h1>{{ category.name }}</h1>
                <p>{{ category.description }}</p>
            </div>
        </div>
    {% else %}
        <!-- Hero Section for All Products -->
        <section class="hero-section">
            <div class="container">
                <h1>Discover Amazing Fashion</h1>
                <p>Explore our curated collection of trendy clothing, shoes, and accessories. Find your perfect style and make a statement.</p>
            </div>
        </section>
    {% endif %}

    <div class="container">
        {% if category %}
            <!-- Breadcrumb -->
            <nav class="breadcrumb">
                <a href="{% url 'shop:allProdCat' %}">Home</a> / 
                <span>{{ category.name }}</span>
            </nav>
        {% endif %}

        <!-- Products Grid with 3D Flip Cards -->
        <div class="product-grid-3d">
            {% for product in products.object_list %}
            <div class="flip-card">
                <div class="flip-card-inner">
                    <!-- Front Side -->
                    <div class="flip-card-front">
                        <div class="product-image-container">
                            <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/banner.png' %}{% endif %}" alt="{{product.name}}" class="product-image">
                        </div>
                        <div class="product-info-front">
                            <h4>{{product.name}}</h4>
                            <div class="price">${{product.price}}</div>
                            <div class="flip-hint">
                                <i class="fas fa-hand-pointer"></i>
                                <span>Hover to see details</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Back Side -->
                    <div class="flip-card-back">
                        <div class="product-details-back">
                            <h4>{{product.name}}</h4>
                            <div class="price-back">${{product.price}}</div>
                            <div class="product-description-back">
                                <p>Discover this amazing product with premium quality and style.</p>
                            </div>
                            <div class="product-actions-back">
                                <a href="{{product.get_url}}" class="btn btn-primary btn-sm">
                                    <i class="fas fa-eye me-2"></i>View Details
                                </a>
                                <a href="{% url 'cart:add_cart' product.id %}" class="btn btn-secondary btn-sm">
                                    <i class="fas fa-shopping-cart me-2"></i>Add to Cart
                                </a>
                            </div>
                            <div class="flip-hint-back">
                                <i class="fas fa-undo"></i>
                                <span>Hover to flip back</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if products.paginator.num_pages > 1 %}
        <div class="pagination">
            {% for pg in products.paginator.page_range %}
            <a href="?page={{pg}}" class="btn {% if products.number == pg %} active {% endif %}">{{pg}}</a>
            {% endfor %}
        </div>
        {% endif %}
    </div>
{% endblock %}
